<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>Food Map ‚Äî ·∫®m th·ª±c H√† N·ªôi</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<style>
:root { --bg:#fffaf5; --accent:#c97; --ink:#3b2f2f; --highlight:#ffeb3b; }
html, body, #wrap { height:100%; margin:0; }
body { font-family:"Segoe UI", Roboto, Arial; background:var(--bg); color:var(--ink); }
#wrap { display:flex; height:100%; }
#sidebar {
  width:320px; min-width:240px; max-width:360px;
  padding:16px; box-sizing:border-box;
  border-right:6px solid rgba(0,0,0,0.05);
  background:linear-gradient(180deg,#fff,#fff8f0);
  overflow:auto;
}
#search { width:100%; padding:8px; margin-bottom:12px; border-radius:6px; border:1px solid #ccc; font-size:13px; }
.item { display:flex; gap:12px; align-items:center; padding:10px; border-radius:10px; margin-bottom:10px;
       background:rgba(255,255,255,0.7); cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.04); transition:0.2s;}
.item:hover { transform:translateY(-3px) scale(1.02); }
.thumb { width:64px; height:64px; border-radius:8px; object-fit:cover; flex:0 0 64px; border:2px solid var(--accent);}
.meta { flex:1; }
.meta h3 { margin:0; font-size:15px; }
.meta p { margin:6px 0 0 0; font-size:13px; color:#6b5a4a; }
.highlight { background:var(--highlight); }
#map { flex:1; }
.leaflet-popup-content { border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.2); text-align:center; }
.leaflet-popup-content img { max-width:220px; border-radius:8px; margin:6px auto; display:block; }
.emoji-icon { font-size:34px; text-align:center; animation: bounce 0.6s infinite; }
@keyframes bounce { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-6px);} }
.guide-icon { font-size:40px; animation: float 1.2s infinite; }
@keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-8px);} }
.btn { display:inline-block; padding:6px 10px; border-radius:8px; background:var(--accent); color:white; text-decoration:none; font-size:13px; margin-top:8px;}
footer{font-size:12px;color:#8a7568;margin-top:8px;}
@media(max-width:720px){ #sidebar{width:42%; min-width:200px; position:absolute; z-index:1000; height:100%; }}
</style>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
<div id="wrap">
  <aside id="sidebar">
    <h1>Food Map ‚Äî H·ªìn ph·ªë c·ªï H√† N·ªôi</h1>
    <p class="lead">Click 1 m√≥n ƒë·ªÉ xem v·ªã tr√≠, video review v√† c√¢u chuy·ªán ng·∫Øn.</p>
    <input type="text" id="search" placeholder="T√¨m m√≥n ƒÉn...">

    <!-- Danh s√°ch m√≥n ƒÉn -->
    <div class="item" data-id="banh-cuon">
      <img class="thumb" src="images/banh_cuon.jpg" alt="B√°nh cu·ªën">
      <div class="meta"><h3>B√°nh cu·ªën Thanh Tr√¨</h3><p>V·ªã m·ªÅm m∆∞·ª£t, ch·∫•m n∆∞·ªõc m·∫Øm chua ng·ªçt.</p></div>
    </div>
    <div class="item" data-id="com">
      <img class="thumb" src="images/com_la.jpg" alt="C·ªëm L√†ng V√≤ng">
      <div class="meta"><h3>C·ªëm L√†ng V√≤ng</h3><p>H∆∞∆°ng thu H√† N·ªôi, th∆°m nh·∫π, h·∫°t c·ªëm d·∫πt.</p></div>
    </div>
    <div class="item" data-id="bun-thang">
      <img class="thumb" src="images/bun_thang.jpg" alt="B√∫n thang">
      <div class="meta"><h3>B√∫n thang</h3><p>Thanh tao, c·∫ßu k·ª≥, m√≥n ƒÉn d·ªãp sum h·ªçp.</p></div>
    </div>
    <div class="item" data-id="che-lam">
      <img class="thumb" src="images/che_lam.jpg" alt="Ch√® lam">
      <div class="meta"><h3>Ch√® lam Th·∫°ch X√°</h3><p>Ng·ªçt d·∫ªo, m√πi g·ª´ng, m√≥n qu√† qu√™.</p></div>
    </div>
    <div class="item" data-id="cha-ca">
      <img class="thumb" src="images/cha_ca.jpg" alt="Ch·∫£ c√° L√£ V·ªçng">
      <div class="meta"><h3>Ch·∫£ c√° L√£ V·ªçng</h3><p>Ch·∫£ c√° n∆∞·ªõng th∆°m, ƒÉn k√®m b√∫n v√† l·∫°c rang.</p></div>
    </div>
    <div class="item" data-id="banh-tom">
      <img class="thumb" src="images/banh_tom.jpg" alt="B√°nh t√¥m H·ªì T√¢y">
      <div class="meta"><h3>B√°nh t√¥m H·ªì T√¢y</h3><p>B√°nh t√¥m gi√≤n r·ª•m, ƒÉn k√®m rau s·ªëng v√† n∆∞·ªõc ch·∫•m.</p></div>
    </div>
    <div class="item" data-id="bun-cha">
      <img class="thumb" src="images/bun_cha.jpg" alt="B√∫n ch·∫£ H√† N·ªôi">
      <div class="meta"><h3>B√∫n ch·∫£ H√† N·ªôi</h3><p>Th·ªãt n∆∞·ªõng th∆°m, n∆∞·ªõc ch·∫•m ƒë·∫∑c tr∆∞ng, ƒÉn c√πng b√∫n.</p></div>
    </div>

    <footer>
      <div class="small">Thay ·∫£nh trong <code>/images/</code> v√† link video/audio trong m·∫£ng foods.</div>
    </footer>
  </aside>
  <div id="map"></div>
</div>

<script>
const foods = [
  {id:'banh-cuon', title:'B√°nh cu·ªën Thanh Tr√¨', coords:[21.0015,105.8394], img:'images/banh_cuon.jpg', desc:'B√°nh cu·ªën m·ªèng, nh√¢n n·∫•m/rau, ƒÉn k√®m ch·∫£ v√† n∆∞·ªõc m·∫Øm chua ng·ªçt.', video:'https://www.youtube.com/embed/VIDEO_ID_1'},
  {id:'com', title:'C·ªëm L√†ng V√≤ng', coords:[21.0278,105.8342], img:'images/com_la.jpg', desc:'C·ªëm d·∫πt, th∆°m m√πi l√∫a non, bi·ªÉu t∆∞·ª£ng m√πa thu H√† N·ªôi.', video:'https://www.youtube.com/embed/VIDEO_ID_2'},
  {id:'bun-thang', title:'B√∫n thang', coords:[21.0355,105.8461], img:'images/bun_thang.jpg', desc:'M√≥n b√∫n c·∫ßu k·ª≥ v·ªõi n∆∞·ªõc d√πng thanh v√† nhi·ªÅu topping m·ªèng.', video:'https://www.youtube.com/embed/VIDEO_ID_3'},
  {id:'che-lam', title:'Ch√® lam Th·∫°ch X√°', coords:[21.0944,105.8081], img:'images/che_lam.jpg', desc:'M√≥n k·∫πo truy·ªÅn th·ªëng, d·∫ªo d·∫ªo, m√πi g·ª´ng, th∆∞·ªùng l√† qu√† qu√™.', video:'https://www.youtube.com/embed/VIDEO_ID_4'},
  {id:'cha-ca', title:'Ch·∫£ c√° L√£ V·ªçng', coords:[21.0280,105.8510], img:'images/cha_ca.jpg', desc:'Ch·∫£ c√° n∆∞·ªõng th∆°m, ƒÉn k√®m b√∫n v√† l·∫°c rang.', video:'https://www.youtube.com/embed/VIDEO_ID_5'},
  {id:'banh-tom', title:'B√°nh t√¥m H·ªì T√¢y', coords:[21.0620,105.8310], img:'images/banh_tom.jpg', desc:'B√°nh t√¥m gi√≤n r·ª•m, ƒÉn k√®m rau s·ªëng v√† n∆∞·ªõc ch·∫•m.', video:'https://www.youtube.com/embed/VIDEO_ID_6'},
  {id:'bun-cha', title:'B√∫n ch·∫£ H√† N·ªôi', coords:[21.0370,105.8340], img:'images/bun_cha.jpg', desc:'Th·ªãt n∆∞·ªõng th∆°m, n∆∞·ªõc ch·∫•m ƒë·∫∑c tr∆∞ng, ƒÉn c√πng b√∫n.', video:'https://www.youtube.com/embed/VIDEO_ID_7'}
];

const emojis = {
  'banh-cuon':'ü•ü','com':'üåæ','bun-thang':'üçú','che-lam':'üç¨',
  'cha-ca':'üêü','banh-tom':'üç§','bun-cha':'üçñ'
};

/* INIT MAP */
const map = L.map('map').setView([21.0285,105.8542],12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap contributors'}).addTo(map);

/* MARKERS */
const markers = {};
foods.forEach(f=>{
  const icon = L.divIcon({html:`<div class="emoji-icon">${emojis[f.id]}</div>`, iconSize:[36,36], iconAnchor:[18,18]});
  const popup = `<div>
    <h3 style="color:#5b3d2e">${f.title}</h3>
    <img src="${f.img}" />
    <p style="font-size:13px;color:#6b5a4a">${f.desc}</p>
    <iframe width="220" height="124" src="${f.video}" frameborder="0" allowfullscreen style="margin-top:8px;border-radius:6px;"></iframe>
  </div>`;
  markers[f.id] = L.marker(f.coords,{icon}).addTo(map).bindPopup(popup);
});

/* GUIDE CUTE */
const guideMarker = L.marker([21.0285,105.8542],{
  icon: L.divIcon({html:'üßë‚Äçüç≥', className:'guide-icon', iconSize:[40,40], iconAnchor:[20,40]})
}).addTo(map);
guideMarker.bindPopup('<div><strong>Ch√†o b·∫°n!</strong><br>M√¨nh d·∫´n b·∫°n kh√°m ph√° m√≥n ƒÉn ü•∞</div>').openPopup();

/* SIDEBAR CLICK */
document.querySelectorAll('.item').forEach(el=>{
  el.addEventListener('click',()=>{
    const id = el.getAttribute('data-id');
    const f = foods.find(x=>x.id===id);
    if(!f) return;
    map.flyTo(f.coords,15,{duration:1.2});
    markers[id].openPopup();
    // guide move
    guideMarker.setLatLng([f.coords[0]-0.001,f.coords[1]+0.001]);
    guideMarker.bindPopup(`<div>Ch√∫ng ta ƒëang ƒë·∫øn <strong>${f.title}</strong> üç¥</div>`).openPopup();
  });
});

/* SEARCH + HIGHLIGHT */
document.getElementById('search').addEventListener('input', e=>{
  const q = e.target.value.toLowerCase();
  document.querySelectorAll('.item').forEach(el=>{
    const titleEl = el.querySelector('h3');
    const title = titleEl.textContent.toLowerCase();
    const id = el.getAttribute('data-id');
    // reset highlight
    titleEl.innerHTML = titleEl.textContent;
    if(title.includes(q) && q!==''){ 
      el.style.display='flex'; 
      markers[id].addTo(map); 
      // highlight
      const regex = new RegExp(`(${q})`, 'gi');
      titleEl.innerHTML = titleEl.textContent.replace(regex,'<span class="highlight">$1</span>');
    }
    else if(q===''){ 
      el.style.display='flex'; 
      markers[id].addTo(map);
    }
    else{ 
      el.style.display='none'; 
      map.removeLayer(markers[id]); 
    }
  });
});

/* FIT BOUNDS */
const group = new L.featureGroup(Object.values(markers));
map.fitBounds(group.getBounds().pad(0.2));
</script>
</body>
</html>